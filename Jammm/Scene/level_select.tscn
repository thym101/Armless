[gd_scene load_steps=8 format=3 uid="uid://dd5fejl010qdh"]

[ext_resource type="Texture2D" uid="uid://bce7nh8v1353s" path="res://pictures/Screen Shot 2024-10-19 at 10.50.44 PM.png" id="1_3krgx"]
[ext_resource type="Script" path="res://Script/level_select.gd" id="1_fafk7"]
[ext_resource type="PackedScene" uid="uid://ucc3hhl0naab" path="res://Scene/level_icon.tscn" id="1_nq6hm"]
[ext_resource type="PackedScene" uid="uid://p0tt1xj8cpfx" path="res://Scene/player_icon.tscn" id="3_tkoou"]
[ext_resource type="FontFile" uid="uid://dmjie0htcxto3" path="res://arcadeclassic (1)/ARCADECLASSIC.TTF" id="5_3jp5t"]

[sub_resource type="StyleBoxFlat" id="StyleBoxFlat_and2o"]
bg_color = Color(0.054902, 0.054902, 0.054902, 0.560784)

[sub_resource type="Curve2D" id="Curve2D_2dl6d"]
_data = {
"points": PackedVector2Array(0, 0, 0, 0, 114, 564, 0, 0, 0, 0, 112, 416, 0, 0, 0, 0, 150, 416, 0, 0, 0, 0, 352, 416, 0, 0, 0, 0, 352, 370, 0, 0, 0, 0, 310, 370, 0, 0, 0, 0, 310, 250, 0, 0, 0, 0, 232, 250, 0, 0, 0, 0, 230, 144, 0, 0, 0, 0, 308, 144, 0, 0, 0, 0, 308, 100, 0, 0, 0, 0, 308, 144, 0, 0, 0, 0, 230, 144, 0, 0, 0, 0, 230, 248, 0, 0, 0, 0, 310, 250, 0, 0, 0, 0, 310, 370, 0, 0, 0, 0, 352, 370, 0, 0, 0, 0, 352, 416, 0, 0, 0, 0, 480, 416, 0, 0, 0, 0, 600, 416, 0, 0, 0, 0, 600, 284, 0, 0, 0, 0, 600, 418, 0, 0, 0, 0, 730, 418, 0, 0, 0, 0, 848, 418, 0, 0, 0, 0, 848, 552, 0, 0, 0, 0, 848, 418, 0, 0, 0, 0, 1026, 418, 0, 0, 0, 0, 1026, 252, 0, 0, 0, 0, 1026, 418, 0, 0, 0, 0, 848, 418, 0, 0, 0, 0, 730, 418, 0, 0, 0, 0, 600, 418, 0, 0, 0, 0, 480, 416, 0, 0, 0, 0, 352, 416, 0, 0, 0, 0, 150, 414, 0, 0, 0, 0, 112, 418, 0, 0, 0, 0, 114, 564)
}
point_count = 37

[sub_resource type="AtlasTexture" id="AtlasTexture_n7e1o"]
atlas = ExtResource("5_6qikb")
region = Rect2(288, 64, 16, 32)

[sub_resource type="AtlasTexture" id="AtlasTexture_o6pmt"]
atlas = ExtResource("5_6qikb")
region = Rect2(304, 64, 16, 32)

[sub_resource type="AtlasTexture" id="AtlasTexture_cs8bm"]
atlas = ExtResource("5_6qikb")
region = Rect2(320, 64, 16, 32)

[sub_resource type="AtlasTexture" id="AtlasTexture_1aua0"]
atlas = ExtResource("5_6qikb")
region = Rect2(336, 64, 16, 32)

[sub_resource type="AtlasTexture" id="AtlasTexture_cqycp"]
atlas = ExtResource("5_6qikb")
region = Rect2(352, 64, 16, 32)

[sub_resource type="AtlasTexture" id="AtlasTexture_uy41m"]
atlas = ExtResource("5_6qikb")
region = Rect2(368, 64, 16, 32)

[sub_resource type="AtlasTexture" id="AtlasTexture_1t8je"]
atlas = ExtResource("5_6qikb")
region = Rect2(288, 32, 16, 32)

[sub_resource type="AtlasTexture" id="AtlasTexture_232qo"]
atlas = ExtResource("5_6qikb")
region = Rect2(304, 32, 16, 32)

[sub_resource type="AtlasTexture" id="AtlasTexture_yp286"]
atlas = ExtResource("5_6qikb")
region = Rect2(320, 32, 16, 32)

[sub_resource type="AtlasTexture" id="AtlasTexture_s08gq"]
atlas = ExtResource("5_6qikb")
region = Rect2(336, 32, 16, 32)

[sub_resource type="AtlasTexture" id="AtlasTexture_oil7u"]
atlas = ExtResource("5_6qikb")
region = Rect2(352, 32, 16, 32)

[sub_resource type="AtlasTexture" id="AtlasTexture_rmdey"]
atlas = ExtResource("5_6qikb")
region = Rect2(368, 32, 16, 32)

[sub_resource type="AtlasTexture" id="AtlasTexture_4e210"]
atlas = ExtResource("5_6qikb")
region = Rect2(272, 64, 16, 32)

[sub_resource type="AtlasTexture" id="AtlasTexture_epnw6"]
atlas = ExtResource("5_6qikb")
region = Rect2(256, 64, 16, 32)

[sub_resource type="AtlasTexture" id="AtlasTexture_ga5lu"]
atlas = ExtResource("5_6qikb")
region = Rect2(240, 64, 16, 32)

[sub_resource type="AtlasTexture" id="AtlasTexture_2xbfl"]
atlas = ExtResource("5_6qikb")
region = Rect2(224, 64, 16, 32)

[sub_resource type="AtlasTexture" id="AtlasTexture_2nu4a"]
atlas = ExtResource("5_6qikb")
region = Rect2(208, 64, 16, 32)

[sub_resource type="AtlasTexture" id="AtlasTexture_3wc2h"]
atlas = ExtResource("5_6qikb")
region = Rect2(192, 64, 16, 32)

[sub_resource type="AtlasTexture" id="AtlasTexture_fevy7"]
atlas = ExtResource("5_6qikb")
region = Rect2(0, 64, 16, 32)

[sub_resource type="AtlasTexture" id="AtlasTexture_maybv"]
atlas = ExtResource("5_6qikb")
region = Rect2(16, 64, 16, 32)

[sub_resource type="AtlasTexture" id="AtlasTexture_mq71g"]
atlas = ExtResource("5_6qikb")
region = Rect2(32, 64, 16, 32)

[sub_resource type="AtlasTexture" id="AtlasTexture_f4a3w"]
atlas = ExtResource("5_6qikb")
region = Rect2(48, 64, 16, 32)

[sub_resource type="AtlasTexture" id="AtlasTexture_2cohg"]
atlas = ExtResource("5_6qikb")
region = Rect2(64, 64, 16, 32)

[sub_resource type="AtlasTexture" id="AtlasTexture_t0r88"]
atlas = ExtResource("5_6qikb")
region = Rect2(80, 64, 16, 32)

[sub_resource type="AtlasTexture" id="AtlasTexture_4cpnx"]
atlas = ExtResource("5_6qikb")
region = Rect2(288, 64, 16, 32)

[sub_resource type="AtlasTexture" id="AtlasTexture_3dhmc"]
atlas = ExtResource("5_6qikb")
region = Rect2(304, 64, 16, 32)

[sub_resource type="AtlasTexture" id="AtlasTexture_chdyu"]
atlas = ExtResource("5_6qikb")
region = Rect2(320, 64, 16, 32)

[sub_resource type="AtlasTexture" id="AtlasTexture_i16ad"]
atlas = ExtResource("5_6qikb")
region = Rect2(336, 64, 16, 32)

[sub_resource type="AtlasTexture" id="AtlasTexture_cqgrx"]
atlas = ExtResource("5_6qikb")
region = Rect2(352, 64, 16, 32)

[sub_resource type="AtlasTexture" id="AtlasTexture_ldj5i"]
atlas = ExtResource("5_6qikb")
region = Rect2(368, 64, 16, 32)

[sub_resource type="SpriteFrames" id="SpriteFrames_nyl06"]
animations = [{
"frames": [{
"duration": 1.0,
"texture": SubResource("AtlasTexture_n7e1o")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_o6pmt")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_cs8bm")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_1aua0")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_cqycp")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_uy41m")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_1t8je")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_232qo")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_yp286")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_s08gq")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_oil7u")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_rmdey")
}],
"loop": true,
"name": &"idle",
"speed": 5.0
}, {
"frames": [{
"duration": 1.0,
"texture": SubResource("AtlasTexture_4e210")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_epnw6")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_ga5lu")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_2xbfl")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_2nu4a")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_3wc2h")
}],
"loop": true,
"name": &"turn_left",
"speed": 5.0
}, {
"frames": [{
"duration": 1.0,
"texture": SubResource("AtlasTexture_fevy7")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_maybv")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_mq71g")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_f4a3w")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_2cohg")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_t0r88")
}],
"loop": true,
"name": &"turn_right",
"speed": 5.0
}, {
"frames": [{
"duration": 1.0,
"texture": SubResource("AtlasTexture_4cpnx")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_3dhmc")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_chdyu")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_i16ad")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_cqgrx")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_ldj5i")
}],
"loop": true,
"name": &"walk",
"speed": 5.0
}]

[sub_resource type="GDScript" id="GDScript_ynkdn"]
script/source = "extends AnimatedSprite2D

@onready var path_follow = get_parent()
@onready var path = path_follow.get_parent()

var speed = 100.0  # Adjust this to change movement speed
var target_distance = 0.5  # The point on the path where you want to stop (0.0 to 1.0)
var is_moving = true
var previous_offset = 0.0
var turn_threshold = 0.1  # Adjust this to change sensitivity to turns

func _ready():
	path_follow.progress_ratio = 0.0
	previous_offset = path_follow.progress
	start_moving()

func _process(delta):
	if is_moving:
		var initial_offset = path_follow.progress
		
		# Move along the path
		path_follow.progress += speed * delta
		
		# Check if we've reached our target point
		if path_follow.progress_ratio >= target_distance:
			path_follow.progress_ratio = target_distance
			is_moving = false
			play(\"idle\")
			return
		
		# Determine turning direction
		var current_point = path.curve.sample_baked(path_follow.progress)
		var next_point = path.curve.sample_baked(path_follow.progress + 0.1)
		var previous_point = path.curve.sample_baked(previous_offset)
		
		var current_direction = (next_point - current_point).normalized()
		var previous_direction = (current_point - previous_point).normalized()
		
		var turn_angle = previous_direction.angle_to(current_direction)
		
		if abs(turn_angle) < turn_threshold:
			play(\"walk\")
		elif turn_angle > 0:
			play(\"turn_left\")
		else:
			play(\"turn_right\")
		
		# Flip the sprite based on overall movement direction
		flip_h = current_direction.x < 0
		
		previous_offset = initial_offset

func start_moving():
	is_moving = true
"

[node name="LevelSelect" type="TextureRect"]
texture_filter = 1
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
texture = ExtResource("1_3krgx")
expand_mode = 1
flip_h = true
script = ExtResource("1_fafk7")

[node name="Panel" type="Panel" parent="."]
layout_mode = 1
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
theme_override_styles/panel = SubResource("StyleBoxFlat_and2o")

[node name="Line2D3" type="Line2D" parent="Panel"]
points = PackedVector2Array(114, 544, 114, 416, 136, 416)
width = 7.0

[node name="Line2D" type="Line2D" parent="Panel"]
points = PackedVector2Array(172, 416, 332, 416)
width = 7.0

[node name="Line2D2" type="Line2D" parent="Panel"]
points = PackedVector2Array(352, 396, 352, 370, 310, 370, 310, 268)
width = 7.0

[node name="Line2D4" type="Line2D" parent="Panel"]
points = PackedVector2Array(290, 250, 230, 250, 230, 144, 308, 144, 308, 118)
width = 7.0

[node name="Line2D5" type="Line2D" parent="Panel"]
points = PackedVector2Array(370, 416, 462, 416)
width = 7.0

[node name="Line2D6" type="Line2D" parent="Panel"]
points = PackedVector2Array(498, 416, 580, 416, 600, 420, 600, 304, 600, 418, 708, 418, 830, 418, 848, 418, 862, 418, 998, 418, 1026, 418, 1026, 270)
width = 7.0

[node name="Line2D7" type="Line2D" parent="Panel"]
points = PackedVector2Array(848, 438, 848, 528)
width = 7.0

[node name="LevelIcon" parent="." node_paths=PackedStringArray("next_level_up") instance=ExtResource("1_nq6hm")]
offset_left = 82.0
offset_top = 528.0
offset_right = 146.0
offset_bottom = 592.0
next_level_up = NodePath("../LevelIcon2")

[node name="LevelIcon2" parent="." node_paths=PackedStringArray("next_level_down", "next_level_right") instance=ExtResource("1_nq6hm")]
offset_top = 380.0
offset_bottom = 444.0
next_level_down = NodePath("../LevelIcon")
next_level_right = NodePath("../LevelIcon3")

[node name="LevelIcon3" parent="." node_paths=PackedStringArray("next_level_up", "next_level_left", "next_level_right") instance=ExtResource("1_nq6hm")]
offset_left = 320.0
offset_top = 380.0
offset_right = 384.0
offset_bottom = 444.0
level_name = "2"
next_level_up = NodePath("../LevelIcon4")
next_level_left = NodePath("../LevelIcon2")
next_level_right = NodePath("../LevelIcon13")

[node name="LevelIcon13" parent="." node_paths=PackedStringArray("next_level_left", "next_level_right") instance=ExtResource("1_nq6hm")]
offset_left = 448.0
offset_top = 380.0
offset_right = 512.0
offset_bottom = 444.0
level_name = "3"
next_level_left = NodePath("../LevelIcon3")
next_level_right = NodePath("../LevelIcon6")

[node name="LevelIcon6" parent="." node_paths=PackedStringArray("next_level_up", "next_level_left", "next_level_right") instance=ExtResource("1_nq6hm")]
offset_left = 568.0
offset_top = 380.0
offset_right = 632.0
offset_bottom = 444.0
level_name = "5"
next_level_up = NodePath("../LevelIcon8")
next_level_left = NodePath("../LevelIcon13")
next_level_right = NodePath("../LevelIcon7")

[node name="LevelIcon7" parent="." node_paths=PackedStringArray("next_level_left", "next_level_right") instance=ExtResource("1_nq6hm")]
offset_left = 698.0
offset_top = 382.0
offset_right = 762.0
offset_bottom = 446.0
level_name = "6"
next_level_left = NodePath("../LevelIcon6")
next_level_right = NodePath("../LevelIcon9")

[node name="LevelIcon8" parent="." node_paths=PackedStringArray("next_level_down") instance=ExtResource("1_nq6hm")]
offset_left = 568.0
offset_top = 248.0
offset_right = 632.0
offset_bottom = 312.0
level_name = "7"
next_level_down = NodePath("../LevelIcon6")

[node name="LevelIcon9" parent="." node_paths=PackedStringArray("next_level_down", "next_level_left", "next_level_right") instance=ExtResource("1_nq6hm")]
offset_left = 816.0
offset_top = 382.0
offset_right = 880.0
offset_bottom = 446.0
level_name = "8"
next_level_down = NodePath("../LevelIcon14")
next_level_left = NodePath("../LevelIcon7")
next_level_right = NodePath("../LevelIcon10")

[node name="LevelIcon14" parent="." node_paths=PackedStringArray("next_level_up") instance=ExtResource("1_nq6hm")]
offset_left = 816.0
offset_top = 512.0
offset_right = 880.0
offset_bottom = 576.0
level_name = "Reward"
next_level_up = NodePath("../LevelIcon9")

[node name="LevelIcon10" parent="." node_paths=PackedStringArray("next_level_up", "next_level_left") instance=ExtResource("1_nq6hm")]
offset_left = 994.0
offset_top = 382.0
offset_right = 1058.0
offset_bottom = 446.0
level_name = "9"
next_level_up = NodePath("../LevelIcon12")
next_level_left = NodePath("../LevelIcon9")

[node name="LevelIcon12" parent="." node_paths=PackedStringArray("next_level_down") instance=ExtResource("1_nq6hm")]
offset_left = 994.0
offset_top = 216.0
offset_right = 1058.0
offset_bottom = 280.0
level_name = "10"
next_level_down = NodePath("../LevelIcon10")

[node name="LevelIcon4" parent="." node_paths=PackedStringArray("next_level_up", "next_level_down") instance=ExtResource("1_nq6hm")]
offset_left = 278.0
offset_top = 214.0
offset_right = 340.0
offset_bottom = 284.0
level_name = "4"
next_level_up = NodePath("../LevelIcon5")
next_level_down = NodePath("../LevelIcon3")

[node name="LevelIcon5" parent="." node_paths=PackedStringArray("next_level_down") instance=ExtResource("1_nq6hm")]
offset_left = 276.0
offset_top = 62.0
offset_right = 340.0
offset_bottom = 126.0
next_level_down = NodePath("../LevelIcon4")

[node name="Path2D" type="Path2D" parent="."]
curve = SubResource("Curve2D_2dl6d")

[node name="PathFollow2D" type="PathFollow2D" parent="Path2D"]
position = Vector2(114, 564)
rotation = -1.58431

[node name="PlayerIcon" parent="Path2D/PathFollow2D" instance=ExtResource("3_tkoou")]
position = Vector2(7.99927, 0.108116)
rotation = 1.58431
scale = Vector2(2, 1.98438)
frame_progress = 0.981799

[node name="PlayerStats" type="Label" parent="."]
layout_mode = 0
offset_right = 170.0
offset_bottom = 84.0
theme_override_fonts/font = ExtResource("5_3jp5t")
